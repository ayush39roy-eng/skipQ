<!DOCTYPE html>
<html lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Canteen Portal Login</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
<script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#3B82F6", // Vibrant Blue
                        "background-light": "#f6f8f6",
                        "background-dark": "#111827", // Dark background
                        "surface-dark": "#1F2937", // Slightly lighter surface
                        "text-light": "#F9FAFB", // Light text for dark bg
                        "text-dark": "#111827", // Dark text for light bg
                        "text-muted": "#9CA3AF", // Muted text color
                    },
                    fontFamily: {
                        "display": ["Plus Jakarta Sans", "Noto Sans", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.5rem",
                        "lg": "0.75rem",
                        "xl": "1rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
<style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 300, 'GRAD' 0, 'opsz' 24
        }
    </style>
</head>
<body class="font-display bg-background-dark text-text-light">
<div class="relative flex min-h-screen w-full flex-col bg-background-dark group/design-root overflow-x-hidden">
<div class="layout-container flex h-full grow flex-col">
<div class="flex flex-1 items-center justify-center p-4 py-12 md:p-8">
<div class="layout-content-container flex w-full max-w-md flex-col">
<div class="flex flex-col items-stretch justify-start rounded-xl bg-surface-dark border border-gray-700/50 shadow-2xl shadow-primary/10">
<div class="flex w-full flex-col items-center justify-center gap-6 p-8 md:p-10">
<div class="flex items-center gap-3 text-primary">
<span class="material-symbols-outlined text-5xl">
                                    lunch_dining
                                </span>
<h1 class="text-text-light text-3xl font-bold tracking-tighter">SkipQ</h1>
</div>
<div class="text-center">
<p class="text-text-light text-xl font-semibold leading-tight tracking-tight">Welcome Back</p>
<p class="text-text-muted text-base font-normal leading-normal">Sign in to continue to your account.</p>
</div>
<!-- Ensure backend verifies the csrf_token on submission -->
<form action="/login" method="POST" class="flex w-full flex-col gap-4">
<input type="hidden" name="csrf_token" value="{{csrf_token}}" />
{{#if form_error}}
<p class="text-sm font-medium text-red-400 rounded-lg bg-red-500/10 border border-red-500/30 px-3 py-2" role="alert" aria-live="assertive">{{form_error}}</p>
{{/if}}
<label class="flex w-full flex-col">
<p class="text-text-light text-sm font-medium leading-normal pb-2">Email</p>
<input class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-text-light focus:outline-0 focus:ring-2 focus:ring-primary/50 border border-gray-600 bg-gray-800/50 focus:border-primary h-12 placeholder:text-text-muted p-3 text-base font-normal leading-normal transition-colors" placeholder="you@example.com" type="email" name="email" autocomplete="email" required value="{{email}}"/>
{{#if email_error}}
<p class="mt-1 text-sm text-red-400" role="alert">{{email_error}}</p>
{{/if}}
</label>
<label class="flex w-full flex-col">
<p class="text-text-light text-sm font-medium leading-normal pb-2">Password</p>
<div class="flex w-full flex-1 items-stretch rounded-lg">
<input data-password-input="true" class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-l-lg text-text-light focus:outline-0 focus:ring-2 focus:ring-primary/50 border border-gray-600 bg-gray-800/50 focus:border-primary h-12 placeholder:text-text-muted p-3 border-r-0 pr-2 text-base font-normal leading-normal transition-colors" placeholder="Enter your password" type="password" name="password" autocomplete="current-password" required value=""/>
<button type="button" class="text-text-muted flex border border-gray-600 bg-gray-800/50 items-center justify-center px-3 rounded-r-lg border-l-0 hover:bg-gray-700/50 transition-colors" data-icon="Eye" data-size="24px" data-weight="regular" data-password-toggle="true" aria-pressed="false" aria-label="Toggle password visibility">
<span class="material-symbols-outlined">
                                                visibility
                                            </span>
</button>
</div>
{{#if password_error}}
<p class="mt-1 text-sm text-red-400" role="alert">{{password_error}}</p>
{{/if}}
</label>
<div class="flex w-full items-center justify-end">
<a class="text-text-muted text-sm font-normal leading-normal underline hover:text-primary transition-colors" href="/forgot-password">Forgot Password?</a>
</div>
<button type="submit" class="flex w-full min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-4 bg-primary text-white text-base font-semibold leading-normal shadow-lg shadow-primary/20 hover:bg-blue-500 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-background-dark">
<span class="truncate">Sign In</span>
</button>
<p class="text-text-muted text-sm font-normal leading-normal text-center">Don't have an account? <a class="font-semibold text-primary hover:underline" href="/register">Register Now</a></p>
</form>
</div>
</div>
</div>
</div>
</div>
</div>

<script id="password-visibility-toggle">
    (() => {
        const toggles = document.querySelectorAll('[data-password-toggle]');
        toggles.forEach((toggle) => {
            if (toggle.dataset.initialized === 'true') {
                return;
            }
            toggle.dataset.initialized = 'true';

            const input = toggle.closest('div')?.querySelector('[data-password-input]');
            if (!input) {
                return;
            }

            const icon = toggle.querySelector('.material-symbols-outlined');

            toggle.addEventListener('click', (event) => {
                event.preventDefault();
                const isVisible = input.getAttribute('type') === 'text';
                const nextType = isVisible ? 'password' : 'text';
                input.setAttribute('type', nextType);

                toggle.setAttribute('aria-pressed', String(!isVisible));
                toggle.setAttribute('aria-label', isVisible ? 'Show password' : 'Hide password');

                if (icon) {
                    icon.textContent = isVisible ? 'visibility' : 'visibility_off';
                }
            });
        });
    })();
</script>

</body></html>